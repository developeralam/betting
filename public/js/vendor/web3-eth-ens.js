(self.webpackChunk=self.webpackChunk||[]).push([[659],{29321:(e,t,n)=>{"use strict";var o=n(7340),r=n(84390).formatters,s=n(18269),a=n(33677),i=n(2561),p=n(88894);function u(e){this.eth=e;var t=null;this._detectedAddress=null,this._lastSyncCheck=null,Object.defineProperty(this,"registry",{get:function(){return new a(this)},enumerable:!0}),Object.defineProperty(this,"resolverMethodHandler",{get:function(){return new i(this.registry)},enumerable:!0}),Object.defineProperty(this,"registryAddress",{get:function(){return t},set:function(e){t=null!==e?r.inputAddressFormatter(e):e},enumerable:!0})}u.prototype.supportsInterface=function(e,t,n){return this.getResolver(e).then((function(e){return s.isHexStrict(t)||(t=s.sha3(t).slice(0,10)),e.methods.supportsInterface(t).call(n)})).catch((function(e){if("function"!=typeof n)throw e;n(e,null)}))},u.prototype.resolver=function(e,t){return this.registry.resolver(e,t)},u.prototype.getResolver=function(e,t){return this.registry.getResolver(e,t)},u.prototype.setResolver=function(e,t,n,o){return this.registry.setResolver(e,t,n,o)},u.prototype.setRecord=function(e,t,n,o,r,s){return this.registry.setRecord(e,t,n,o,r,s)},u.prototype.setSubnodeRecord=function(e,t,n,o,r,s,a){return this.registry.setSubnodeRecord(e,t,n,o,r,s,a)},u.prototype.setApprovalForAll=function(e,t,n,o){return this.registry.setApprovalForAll(e,t,n,o)},u.prototype.isApprovedForAll=function(e,t,n){return this.registry.isApprovedForAll(e,t,n)},u.prototype.recordExists=function(e,t){return this.registry.recordExists(e,t)},u.prototype.setSubnodeOwner=function(e,t,n,o,r){return this.registry.setSubnodeOwner(e,t,n,o,r)},u.prototype.getTTL=function(e,t){return this.registry.getTTL(e,t)},u.prototype.setTTL=function(e,t,n,o){return this.registry.setTTL(e,t,n,o)},u.prototype.getOwner=function(e,t){return this.registry.getOwner(e,t)},u.prototype.setOwner=function(e,t,n,o){return this.registry.setOwner(e,t,n,o)},u.prototype.getAddress=function(e,t){return this.resolverMethodHandler.method(e,"addr",[]).call(t)},u.prototype.setAddress=function(e,t,n,o){return this.resolverMethodHandler.method(e,"setAddr",[t]).send(n,o)},u.prototype.getPubkey=function(e,t){return this.resolverMethodHandler.method(e,"pubkey",[],null,t).call(t)},u.prototype.setPubkey=function(e,t,n,o,r){return this.resolverMethodHandler.method(e,"setPubkey",[t,n]).send(o,r)},u.prototype.getContent=function(e,t){return this.resolverMethodHandler.method(e,"content",[]).call(t)},u.prototype.setContent=function(e,t,n,o){return this.resolverMethodHandler.method(e,"setContent",[t]).send(n,o)},u.prototype.getContenthash=function(e,t){return this.resolverMethodHandler.method(e,"contenthash",[],p.decode).call(t)},u.prototype.setContenthash=function(e,t,n,o){var r;try{r=p.encode(t)}catch(e){var s=new Error("Could not encode "+t+". See docs for supported hash protocols.");if("function"==typeof o)return void o(s,null);throw s}return this.resolverMethodHandler.method(e,"setContenthash",[r]).send(n,o)},u.prototype.getMultihash=function(e,t){return this.resolverMethodHandler.method(e,"multihash",[]).call(t)},u.prototype.setMultihash=function(e,t,n,o){return this.resolverMethodHandler.method(e,"multihash",[t]).send(n,o)},u.prototype.checkNetwork=async function(){var e=new Date/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){var t=e-(await this.eth.getBlock("latest")).timestamp;if(t>3600)throw new Error("Network not synced; last block was "+t+" seconds ago");this._lastSyncCheck=e}if(this.registryAddress)return this.registryAddress;if(!this._detectedAddress){var n=await this.eth.net.getNetworkType(),r=o.addresses[n];if(void 0===r)throw new Error("ENS is not supported on network "+n);return this._detectedAddress=r,this._detectedAddress}return this._detectedAddress},e.exports=u},7340:e=>{"use strict";e.exports={addresses:{main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",ropsten:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",rinkeby:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},interfaceIds:{addr:"0x3b3b57de",setAddr:"0x3b3b57de",pubkey:"0xc8690233",setPubkey:"0xc8690233",contenthash:"0xbc1c58d1",setContenthash:"0xbc1c58d1",content:"0xd8389dc5",setContent:"0xd8389dc5"}}},33677:(e,t,n)=>{"use strict";var o=n(31692),r=n(59873),s=n(4017),a=n(84390).formatters,i=n(18269),p=n(26116),u=n(29234);function c(e){var t=this;this.ens=e,this.contract=e.checkNetwork().then((function(e){var n=new o(p,e);return n.setProvider(t.ens.eth.currentProvider),n}))}c.prototype.owner=function(e,t){return console.warn('Deprecated: Please use the "getOwner" method instead of "owner".'),this.getOwner(e,t)},c.prototype.getOwner=function(e,t){var n=new s(!0);return this.contract.then((function(t){return t.methods.owner(r.hash(e)).call()})).then((function(e){"function"!=typeof t?n.resolve(e):t(e,e)})).catch((function(e){"function"!=typeof t?n.reject(e):t(e,null)})),n.eventEmitter},c.prototype.setOwner=function(e,t,n,o){var i=new s(!0);return this.contract.then((function(o){return o.methods.setOwner(r.hash(e),a.inputAddressFormatter(t)).send(n)})).then((function(e){"function"!=typeof o?i.resolve(e):o(e,e)})).catch((function(e){"function"!=typeof o?i.reject(e):o(e,null)})),i.eventEmitter},c.prototype.getTTL=function(e,t){var n=new s(!0);return this.contract.then((function(t){return t.methods.ttl(r.hash(e)).call()})).then((function(e){"function"!=typeof t?n.resolve(e):t(e,e)})).catch((function(e){"function"!=typeof t?n.reject(e):t(e,null)})),n.eventEmitter},c.prototype.setTTL=function(e,t,n,o){var a=new s(!0);return this.contract.then((function(o){return o.methods.setTTL(r.hash(e),t).send(n)})).then((function(e){"function"!=typeof o?a.resolve(e):o(e,e)})).catch((function(e){"function"!=typeof o?a.reject(e):o(e,null)})),a.eventEmitter},c.prototype.setSubnodeOwner=function(e,t,n,o,p){var u=new s(!0);return i.isHexStrict(t)||(t=i.sha3(t)),this.contract.then((function(s){return s.methods.setSubnodeOwner(r.hash(e),t,a.inputAddressFormatter(n)).send(o)})).then((function(e){"function"!=typeof p?u.resolve(e):p(e,e)})).catch((function(e){"function"!=typeof p?u.reject(e):p(e,null)})),u.eventEmitter},c.prototype.setRecord=function(e,t,n,o,i,p){var u=new s(!0);return this.contract.then((function(s){return s.methods.setRecord(r.hash(e),a.inputAddressFormatter(t),a.inputAddressFormatter(n),o).send(i)})).then((function(e){"function"!=typeof p?u.resolve(e):p(e,e)})).catch((function(e){"function"!=typeof p?u.reject(e):p(e,null)})),u.eventEmitter},c.prototype.setSubnodeRecord=function(e,t,n,o,p,u,c){var d=new s(!0);return i.isHexStrict(t)||(t=i.sha3(t)),this.contract.then((function(s){return s.methods.setSubnodeRecord(r.hash(e),t,a.inputAddressFormatter(n),a.inputAddressFormatter(o),p).send(u)})).then((function(e){"function"!=typeof c?d.resolve(e):c(e,e)})).catch((function(e){"function"!=typeof c?d.reject(e):c(e,null)})),d.eventEmitter},c.prototype.setApprovalForAll=function(e,t,n,o){var r=new s(!0);return this.contract.then((function(o){return o.methods.setApprovalForAll(a.inputAddressFormatter(e),t).send(n)})).then((function(e){"function"!=typeof o?r.resolve(e):o(e,e)})).catch((function(e){"function"!=typeof o?r.reject(e):o(e,null)})),r.eventEmitter},c.prototype.isApprovedForAll=function(e,t,n){var o=new s(!0);return this.contract.then((function(n){return n.methods.isApprovedForAll(a.inputAddressFormatter(e),a.inputAddressFormatter(t)).call()})).then((function(e){"function"!=typeof n?o.resolve(e):n(e,e)})).catch((function(e){"function"!=typeof n?o.reject(e):n(e,null)})),o.eventEmitter},c.prototype.recordExists=function(e,t){var n=new s(!0);return this.contract.then((function(t){return t.methods.recordExists(r.hash(e)).call()})).then((function(e){"function"!=typeof t?n.resolve(e):t(e,e)})).catch((function(e){"function"!=typeof t?n.reject(e):t(e,null)})),n.eventEmitter},c.prototype.resolver=function(e,t){return console.warn('Deprecated: Please use the "getResolver" method instead of "resolver".'),this.getResolver(e,t)},c.prototype.getResolver=function(e,t){var n=this;return this.contract.then((function(t){return t.methods.resolver(r.hash(e)).call()})).then((function(e){var r=new o(u,e);if(r.setProvider(n.ens.eth.currentProvider),"function"!=typeof t)return r;t(r,r)})).catch((function(e){if("function"!=typeof t)throw e;t(e,null)}))},c.prototype.setResolver=function(e,t,n,o){var i=new s(!0);return this.contract.then((function(o){return o.methods.setResolver(r.hash(e),a.inputAddressFormatter(t)).send(n)})).then((function(e){"function"!=typeof o?i.resolve(e):o(e,e)})).catch((function(e){"function"!=typeof o?i.reject(e):o(e,null)})),i.eventEmitter},e.exports=c},60306:(e,t,n)=>{"use strict";var o=n(29321);e.exports=o},2561:(e,t,n)=>{"use strict";var o=n(4017),r=n(59873),s=n(84390).errors,a=n(7340).interfaceIds;function i(e){this.registry=e}i.prototype.method=function(e,t,n,o,r){return{call:this.call.bind({ensName:e,methodName:t,methodArguments:n,callback:r,parent:this,outputFormatter:o}),send:this.send.bind({ensName:e,methodName:t,methodArguments:n,callback:r,parent:this})}},i.prototype.call=function(e){var t=this,n=new o,r=this.parent.prepareArguments(this.ensName,this.methodArguments),s=this.outputFormatter||null;return this.parent.registry.getResolver(this.ensName).then((async function(o){await t.parent.checkInterfaceSupport(o,t.methodName),t.parent.handleCall(n,o.methods[t.methodName],r,s,e)})).catch((function(t){"function"!=typeof e?n.reject(t):e(t,null)})),n.eventEmitter},i.prototype.send=function(e,t){var n=this,r=new o,s=this.parent.prepareArguments(this.ensName,this.methodArguments);return this.parent.registry.getResolver(this.ensName).then((async function(o){await n.parent.checkInterfaceSupport(o,n.methodName),n.parent.handleSend(r,o.methods[n.methodName],s,e,t)})).catch((function(e){"function"!=typeof t?r.reject(e):t(e,null)})),r.eventEmitter},i.prototype.handleCall=function(e,t,n,o,r){return t.apply(this,n).call().then((function(t){o&&(t=o(t)),"function"!=typeof r?e.resolve(t):r(t,t)})).catch((function(t){"function"!=typeof r?e.reject(t):r(t,null)})),e},i.prototype.handleSend=function(e,t,n,o,r){return t.apply(this,n).send(o).on("sending",(function(){e.eventEmitter.emit("sending")})).on("sent",(function(){e.eventEmitter.emit("sent")})).on("transactionHash",(function(t){e.eventEmitter.emit("transactionHash",t)})).on("confirmation",(function(t,n){e.eventEmitter.emit("confirmation",t,n)})).on("receipt",(function(t){e.eventEmitter.emit("receipt",t),e.resolve(t),"function"==typeof r&&r(t,t)})).on("error",(function(t){e.eventEmitter.emit("error",t),"function"!=typeof r?e.reject(t):r(t,null)})),e},i.prototype.prepareArguments=function(e,t){var n=r.hash(e);return t.length>0?(t.unshift(n),t):[n]},i.prototype.checkInterfaceSupport=async function(e,t){if(a[t]){var n=!1;try{n=await e.methods.supportsInterface(a[t]).call()}catch(t){console.warn('Could not verify interface of resolver contract at "'+e.options.address+'". ')}if(!n)throw s.ResolverMethodMissingError(e.options.address,t)}},e.exports=i},88894:(e,t,n)=>{var o=n(78138);e.exports={decode:function(e){var t=null,n=null,r=null;if(e&&e.error)return{protocolType:null,decoded:e.error};if(e)try{t=o.decode(e);var s=o.getCodec(e);"ipfs-ns"===s?n="ipfs":"swarm-ns"===s?n="bzz":"onion"===s?n="onion":"onion3"===s?n="onion3":t=e}catch(e){r=e.message}return{protocolType:n,decoded:t,error:r}},encode:function(e){var t,n,r=!1;if(e){var s=e.match(/^(ipfs|bzz|onion|onion3):\/\/(.*)/)||e.match(/\/(ipfs)\/(.*)/);s&&(n=s[1],t=s[2]);try{if("ipfs"===n)t.length>=4&&(r="0x"+o.fromIpfs(t));else if("bzz"===n)t.length>=4&&(r="0x"+o.fromSwarm(t));else if("onion"===n)16===t.length&&(r="0x"+o.encode("onion",t));else{if("onion3"!==n)throw new Error("Could not encode content hash: unsupported content type");56===t.length&&(r="0x"+o.encode("onion3",t))}}catch(e){throw e}}return r}}},26116:e=>{"use strict";e.exports=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"},{constant:!1,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"resolver",type:"address"},{internalType:"uint64",name:"ttl",type:"uint64"}],name:"setRecord",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"label",type:"bytes32"},{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"resolver",type:"address"},{internalType:"uint64",name:"ttl",type:"uint64"}],name:"setSubnodeRecord",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},29234:e=>{"use strict";e.exports=[{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setMultihash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"multihash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"ret",type:"bytes32"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"ret",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"ret",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes32"}],name:"ContentChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]}}]);
//# sourceMappingURL=web3-eth-ens.js.map