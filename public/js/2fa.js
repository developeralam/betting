(self.webpackChunk=self.webpackChunk||[]).push([[6877],{85786:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>$});var o=e(87757),n=e.n(o),a=e(15566),s=e(50175),i=e.n(s);function l(t,r,e,o,n,a,s){try{var i=t[a](s),l=i.value}catch(t){return void e(t)}i.done?r(l):Promise.resolve(l).then(o,n)}const u={middleware:["auth","verified","2fa_not_passed"],mixins:[e(18623).Z],metaInfo:function(){return{title:this.$t("Two-factor authentication")}},data:function(){return{formIsValid:null,form:new(i())({one_time_password:null})}},computed:{appLogoUrl:function(){return(0,a.v)("app.logo")}},methods:{verify:function(){var t,r=this;return(t=n().mark((function t(){var e,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.form.post("/api/user/security/2fa/verify");case 2:e=t.sent,o=e.data,r.$store.dispatch("auth/updateUser",o),r.$router.push({name:"home"});case 6:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(o,n){var a=t.apply(r,e);function s(t){l(a,o,n,s,i,"next",t)}function i(t){l(a,o,n,s,i,"throw",t)}s(void 0)}))})()}}};var c=e(51900),f=e(43453),m=e.n(f),d=e(97844),v=e(4330),p=e(43776),_=e(5255),h=e(17024),w=e(66530),V=e(83240),b=e(17100),y=e(57894),Z=e(22515),g=e(54933),x=e(40961),k=e(73845),C=(0,c.Z)(u,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[e("v-card",{staticClass:"elevation-12"},[e("v-toolbar",{attrs:{color:"primary"}},[e("router-link",{attrs:{to:{name:"home"}}},[e("v-avatar",{attrs:{size:"40",tile:""}},[e("v-img",{attrs:{src:t.appLogoUrl}})],1)],1),t._v(" "),e("v-toolbar-title",{staticClass:"ml-2"},[t._v("\n            "+t._s(t.$t("Two-factor authentication"))+"\n          ")]),t._v(" "),e("v-spacer")],1),t._v(" "),e("v-card-text",[e("v-form",{on:{submit:function(r){return r.preventDefault(),t.verify(r)}},model:{value:t.formIsValid,callback:function(r){t.formIsValid=r},expression:"formIsValid"}},[e("v-text-field",{attrs:{label:t.$t("One-time password"),type:"text",name:"one_time_password",rules:[t.validationRequired,function(r){return t.validationMinLength(r,6)}],error:t.form.errors.has("one_time_password"),"error-messages":t.form.errors.get("one_time_password"),outlined:""},on:{keydown:function(r){return t.clearFormErrors(r,"one_time_password",t.form)}},model:{value:t.form.one_time_password,callback:function(r){t.$set(t.form,"one_time_password",r)},expression:"form.one_time_password"}}),t._v(" "),e("v-btn",{attrs:{type:"submit",color:"primary",disabled:!t.formIsValid||t.form.busy,loading:t.form.busy}},[t._v("\n              "+t._s(t.$t("Verify"))+"\n            ")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);const $=C.exports;m()(C,{VAvatar:d.Z,VBtn:v.Z,VCard:p.Z,VCardText:_.ZB,VCol:h.Z,VContainer:w.Z,VForm:V.Z,VImg:b.Z,VRow:y.Z,VSpacer:Z.Z,VTextField:g.Z,VToolbar:x.Z,VToolbarTitle:k.qW})}}]);
//# sourceMappingURL=2fa.js.map