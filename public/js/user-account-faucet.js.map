{"version":3,"sources":["webpack:///resources/js/components/CountdownTimer.vue","webpack:///./resources/js/components/CountdownTimer.vue?2162","webpack:///./resources/js/components/CountdownTimer.vue?47eb","webpack:///./resources/js/pages/user/account/faucet.vue?19e6","webpack:///resources/js/pages/user/account/faucet.vue","webpack:///./resources/js/pages/user/account/faucet.vue?e11e","webpack:///./resources/js/pages/user/account/faucet.vue"],"names":["props","endDate","type","Number","required","data","timer","interval","watch","this","destroy","create","created","beforeDestroy","methods","tick","setInterval","clearInterval","seconds","minutes","hours","days","diff","render","_vm","_h","$createElement","_self","_c","_v","_s","staticRenderFns","components","mixins","Form","middleware","metaInfo","allowed","time","form","url","computed","amount","parseInt","config","component","attrs","$t","staticClass","on","$event","preventDefault","claimFaucet","model","value","callback","$$v","formIsValid","expression","errors","has","get","scopedSlots","_u","key","fn","busy","proxy","_e","VBtn"],"mappings":"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","file":"js/user-account-faucet.js","sourcesContent":["<template>\r\n  <span>{{ timer }}</span>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    endDate: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      timer: null,\r\n      interval: null\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    endDate (endDate) {\r\n      if (endDate) {\r\n        this.destroy()\r\n        this.create()\r\n      }\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.create()\r\n  },\r\n\r\n  beforeDestroy () {\r\n    this.destroy()\r\n  },\r\n\r\n  methods: {\r\n    create () {\r\n      this.tick()\r\n      this.interval = setInterval(this.tick, 1000)\r\n    },\r\n    destroy () {\r\n      clearInterval(this.interval)\r\n    },\r\n    tick () {\r\n      let diff = Math.max(0, Math.round(this.endDate - Date.now() / 1000))\r\n      let seconds = Math.floor(diff % 60)\r\n      let minutes = Math.floor((diff / 60) % 60)\r\n      let hours = Math.floor((diff / (60 * 60)) % 24)\r\n      let days = Math.floor(diff / (60 * 60 * 24))\r\n\r\n      seconds = seconds < 10 ? '0' + seconds : seconds\r\n      minutes = minutes < 10 ? '0' + minutes : minutes\r\n      hours = hours < 10 ? '0' + hours : hours\r\n\r\n      this.timer = (days > 0 ? `${days}${this.$t('d')} : ` : '') +\r\n        (hours > 0 || days > 0 ? `${hours}${this.$t('h')} : ` : '') +\r\n        `${minutes}${this.$t('m')} : ${seconds}${this.$t('s')}`\r\n\r\n      // clear interval if time elapsed\r\n      if (diff === 0 && this.interval) {\r\n        clearInterval(this.interval)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CountdownTimer.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_vm._v(_vm._s(_vm.timer))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"8\",\"md\":\"6\",\"lg\":\"4\"}},[_c('v-card',[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('Faucet'))+\"\\n          \")])],1),_vm._v(\" \"),_c('v-card-text',[_c('p',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('You can claim {0} credits every {1} {2}.', [_vm.amount, _vm.interval, _vm.interval === 1 ? _vm.$t('hour') : _vm.$t('hours')]))+\"\\n          \")]),_vm._v(\" \"),_c('v-form',{staticClass:\"mt-3\",on:{\"submit\":function($event){$event.preventDefault();return _vm.claimFaucet($event)}},model:{value:(_vm.formIsValid),callback:function ($$v) {_vm.formIsValid=$$v},expression:\"formIsValid\"}},[_c('v-text-field',{attrs:{\"value\":_vm.amount,\"label\":_vm.$t('Faucet amount'),\"suffix\":_vm.$t('credits'),\"readonly\":true,\"error\":_vm.form.errors.has('amount'),\"error-messages\":_vm.form.errors.get('amount'),\"outlined\":\"\"},scopedSlots:_vm._u([{key:\"append-outer\",fn:function(){return [_c('v-skeleton-loader',{attrs:{\"type\":\"button\",\"loading\":_vm.allowed === null}},[_c('v-btn',{staticClass:\"mt-n3\",attrs:{\"type\":\"submit\",\"color\":\"primary\",\"large\":\"\",\"disabled\":!_vm.allowed || !_vm.formIsValid || _vm.form.busy,\"loading\":_vm.form.busy}},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('Get'))+\"\\n                  \")])],1)]},proxy:true}])})],1),_vm._v(\" \"),(_vm.allowed === false && _vm.time)?[_c('span',[_vm._v(_vm._s(_vm.$t('Wait time for the next faucet')))]),_vm._v(\" \"),_c('countdown-timer',{staticClass:\"text-no-wrap\",attrs:{\"end-date\":_vm.time}})]:_vm._e()],2)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid>\r\n    <v-row align=\"center\" justify=\"center\">\r\n      <v-col cols=\"12\" sm=\"8\" md=\"6\" lg=\"4\">\r\n        <v-card>\r\n          <v-toolbar>\r\n            <v-toolbar-title>\r\n              {{ $t('Faucet') }}\r\n            </v-toolbar-title>\r\n          </v-toolbar>\r\n          <v-card-text>\r\n            <p>\r\n              {{ $t('You can claim {0} credits every {1} {2}.', [amount, interval, interval === 1 ? $t('hour') : $t('hours')]) }}\r\n            </p>\r\n            <v-form v-model=\"formIsValid\" class=\"mt-3\" @submit.prevent=\"claimFaucet\">\r\n              <v-text-field\r\n                :value=\"amount\"\r\n                :label=\"$t('Faucet amount')\"\r\n                :suffix=\"$t('credits')\"\r\n                :readonly=\"true\"\r\n                :error=\"form.errors.has('amount')\"\r\n                :error-messages=\"form.errors.get('amount')\"\r\n                outlined\r\n              >\r\n                <template v-slot:append-outer>\r\n                  <v-skeleton-loader type=\"button\" :loading=\"allowed === null\">\r\n                    <v-btn type=\"submit\" color=\"primary\" class=\"mt-n3\" large :disabled=\"!allowed || !formIsValid || form.busy\" :loading=\"form.busy\">\r\n                      {{ $t('Get') }}\r\n                    </v-btn>\r\n                  </v-skeleton-loader>\r\n                </template>\r\n              </v-text-field>\r\n            </v-form>\r\n            <template v-if=\"allowed === false && time\">\r\n              <span>{{ $t('Wait time for the next faucet') }}</span>\r\n              <countdown-timer :end-date=\"time\" class=\"text-no-wrap\" />\r\n            </template>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport Form from 'vform'\r\nimport { config } from '~/plugins/config'\r\nimport axios from 'axios'\r\nimport FormMixin from '~/mixins/Form'\r\nimport CountdownTimer from '~/components/CountdownTimer'\r\n\r\nexport default {\r\n  components: { CountdownTimer },\r\n\r\n  mixins: [FormMixin],\r\n\r\n  middleware: ['auth', 'verified', '2fa_passed', 'faucet'],\r\n\r\n  metaInfo () {\r\n    return { title: this.$t('Faucet') }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      allowed: null,\r\n      time: null,\r\n      form: new Form(),\r\n      url: '/api/user/account/faucet'\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    amount () {\r\n      return parseInt(config('settings.bonuses.faucet.amount'), 10)\r\n    },\r\n    interval () {\r\n      return parseInt(config('settings.bonuses.faucet.interval'), 10)\r\n    }\r\n  },\r\n\r\n  async created () {\r\n    this.checkFaucet()\r\n  },\r\n\r\n  methods: {\r\n    async checkFaucet () {\r\n      const { data: { allowed, time } } = await axios.get(this.url)\r\n\r\n      this.allowed = allowed\r\n      this.time = time\r\n    },\r\n    async claimFaucet () {\r\n      const { data: { success, time } } = await this.form.submit('post', this.url)\r\n\r\n      if (success) {\r\n        this.allowed = false\r\n        this.time = time\r\n        this.$store.dispatch('message/success', { text: this.$t('{0} credits added to your account.', [this.amount]) })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./faucet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./faucet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./faucet.vue?vue&type=template&id=79d10ec9&\"\nimport script from \"./faucet.vue?vue&type=script&lang=js&\"\nexport * from \"./faucet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardText,VCol,VContainer,VForm,VRow,VSkeletonLoader,VTextField,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}